<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Public+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>Torneos de Pádel</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <!-- Archivos de la aplicación -->
    <link rel="stylesheet" href="styles.css">
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="services.js"></script>
    <script src="app.js"></script>
    <style>
      /* Estilos para opciones deshabilitadas en selectores */
      select option:disabled {
        color: #9ca3af;
        font-style: italic;
        background-color: #f3f4f6;
      }
      
      select option:disabled::after {
        content: " (Ya seleccionado)";
      }

      /* Estilos para la modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }

      .modal.show {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        background-color: white;
        margin: 20px;
        padding: 0;
        border-radius: 16px;
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1001;
        color: #64748b;
        background: white;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .close:hover {
        color: #1e293b;
        background: #f8fafc;
      }

      /* Estilos para los iconos del menú */
      .menu-icon {
        transition: all 0.2s ease-in-out;
      }
    </style>
  </head>
  <body>
      <!-- Pantalla inicial de carga -->
      <div id="loading-screen" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-50">
        <div class="text-center flex flex-col items-center justify-center w-full h-full">
          <div class="w-[48rem] h-[48rem] mx-auto">
            <img src="logo/1751396683_c6e2f82efd2848dfbb21758d81fc7ecf.svg" alt="Logo Pádel" class="w-full h-full">
          </div>
        </div>
      </div>

      <!-- Contenido principal -->
      <div id="main-content" class="hidden">
        <div
          class="relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden max-w-screen-xl mx-auto"
          style='--select-button-svg: url(&apos;data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724px%27 height=%2724px%27 fill=%27rgb(100,135,113)%27 viewBox=%270 0 256 256%27%3e%3cpath d=%27M181.66,170.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-48-48a8,8,0,0,1,11.32-11.32L128,212.69l42.34-42.35A8,8,0,0,1,181.66,170.34Zm-96-84.68L128,43.31l42.34,42.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,85.66Z%27%3e%3c/path%3e%3c/svg%3e&apos;); font-family: "Public Sans", "Noto Sans", sans-serif;'
        >
          <div class="w-full px-2 sm:px-4 lg:px-6 main-content">
            <h2 class="text-[#1e293b] text-5xl font-bold leading-tight tracking-[-0.015em] pb-6 pt-8 text-center">Clasificación</h2>
            
            <!-- Mensaje de configuración -->
            <div id="config-message" class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-6">
              <p class="font-bold">⚠️ Configuración necesaria:</p>
              <p>Por favor, actualiza las credenciales de Supabase en el código JavaScript al final de la página.</p>
            </div>
            
            <!-- Error message -->
            <div id="error-message" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
              <p class="font-bold">Error:</p>
              <p id="error-text"></p>
            </div>
            
            <!-- Botón para abrir modal -->
            <div class="flex justify-center mb-12">
              <button
                id="abrir-modal-partido"
                class="px-12 py-6 bg-[#2563eb] text-white rounded-xl shadow-lg hover:bg-[#1d4ed8] transition-all duration-200 text-3xl font-bold"
              >
                Añadir Partido
              </button>
            </div>
            
            <!-- Selector de ordenación -->
            <div class="flex justify-center mb-12">
              <div class="bg-gray-100 rounded-2xl p-3 inline-flex">
                <button
                  id="ordenar-victorias"
                  class="px-8 py-4 bg-white text-[#1e293b] rounded-xl shadow-sm transition-all duration-200 text-2xl font-medium whitespace-nowrap"
                >
                  Victorias
                </button>
                <button
                  id="ordenar-elo"
                  class="px-8 py-4 text-[#64748b] rounded-xl transition-all duration-200 text-2xl font-medium whitespace-nowrap hover:text-[#1e293b]"
                >
                  ELO
                </button>
                <button
                  id="ordenar-progresion"
                  class="px-8 py-4 text-[#64748b] rounded-xl transition-all duration-200 text-2xl font-medium whitespace-nowrap hover:text-[#1e293b]"
                >
                  Progresión
                </button>
              </div>
            </div>
            
            <!-- Jugadores container -->
            <div id="jugadores-container" class="grid grid-cols-1 gap-10 max-w-full mx-auto">
              <!-- Los jugadores se cargarán aquí dinámicamente -->
            </div>
          </div>
        </div>

        <!-- Menú de navegación fijo -->
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-200 z-[9999] p-8">
          <div class="flex justify-around items-center">
            <a href="index.html" class="flex flex-col items-center text-blue-600 menu-link">
              <img src="logo/icono_clasificación.svg" alt="Clasificación" class="w-16 h-16 mb-3 menu-icon">
              <span class="text-3xl font-bold">Clasificación</span>
            </a>
            <a href="partidos.html" class="flex flex-col items-center text-gray-500 hover:text-blue-600 menu-link">
              <img src="logo/icono_pelota_gris.svg" alt="Partidos" class="w-16 h-16 mb-3 menu-icon">
              <span class="text-3xl font-bold">Partidos</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Modal para añadir partido -->
      <div id="modal-partido" class="modal">
        <div class="modal-content">
          <span class="close" id="cerrar-modal">&times;</span>
          
          <div class="p-10">
            <h2 class="text-[#1e293b] text-5xl font-bold leading-tight tracking-[-0.015em] pb-8 text-center">Añadir Partido</h2>
            
            <form id="form-partido" class="space-y-8">
              <!-- Pareja A -->
              <div class="space-y-6">
                <h3 class="text-[#1e293b] text-4xl font-bold leading-tight tracking-[-0.015em]">Pareja A</h3>
                <div class="space-y-6">
                  <label class="flex flex-col">
                    <select
                      id="jugador1"
                      class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 bg-[image:--select-button-svg] placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal"
                    >
                      <option value="">Seleccionar Jugador 1</option>
                    </select>
                  </label>
                  <label class="flex flex-col">
                    <select
                      id="jugador2"
                      class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 bg-[image:--select-button-svg] placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal"
                    >
                      <option value="">Seleccionar Jugador 2</option>
                    </select>
                  </label>
                </div>
              </div>
              
              <!-- Pareja B -->
              <div class="space-y-6">
                <h3 class="text-[#1e293b] text-4xl font-bold leading-tight tracking-[-0.015em]">Pareja B</h3>
                <div class="space-y-6">
                  <label class="flex flex-col">
                    <select
                      id="jugador3"
                      class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 bg-[image:--select-button-svg] placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal"
                    >
                      <option value="">Seleccionar Jugador 3</option>
                    </select>
                  </label>
                  <label class="flex flex-col">
                    <select
                      id="jugador4"
                      class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 bg-[image:--select-button-svg] placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal"
                    >
                      <option value="">Seleccionar Jugador 4</option>
                    </select>
                  </label>
                </div>
              </div>
              
              <!-- Resultado del Partido -->
              <div class="space-y-6">
                <h3 class="text-[#1e293b] text-4xl font-bold leading-tight tracking-[-0.015em]">Resultado del Partido</h3>
                
                <!-- Set 1 -->
                <div class="space-y-4">
                  <h4 class="text-[#1e293b] text-3xl font-bold leading-tight tracking-[-0.015em]">Set 1</h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja A</span>
                      <input
                        id="pareja1-set1"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja B</span>
                      <input
                        id="pareja2-set1"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                  </div>
                </div>
                
                <!-- Set 2 -->
                <div class="space-y-4">
                  <h4 class="text-[#1e293b] text-3xl font-bold leading-tight tracking-[-0.015em]">Set 2</h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja A</span>
                      <input
                        id="pareja1-set2"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja B</span>
                      <input
                        id="pareja2-set2"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                  </div>
                </div>
                
                <!-- Set 3 -->
                <div class="space-y-4">
                  <h4 class="text-[#1e293b] text-3xl font-bold leading-tight tracking-[-0.015em]">Set 3</h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja A</span>
                      <input
                        id="pareja1-set3"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                    <label class="flex flex-col">
                      <span class="text-[#64748b] text-2xl font-medium mb-2">Pareja B</span>
                      <input
                        id="pareja2-set3"
                        type="number"
                        min="0"
                        max="99"
                        step="1"
                        placeholder="0"
                        class="form-input w-full rounded-lg text-[#1e293b] focus:outline-0 focus:ring-0 border border-[#dbeafe] bg-white focus:border-[#3b82f6] h-20 placeholder:text-[#64748b] p-6 text-3xl font-normal leading-normal text-center"
                        value=""
                        oninput="validarInputSet(this)"
                        onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      />
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- Botón de envío -->
              <div class="flex justify-center pt-8">
                <button
                  id="enviar-partido"
                  type="submit"
                  class="flex min-w-[300px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-20 px-12 bg-[#2563eb] text-white text-3xl font-bold leading-normal tracking-[0.015em] hover:bg-[#1d4ed8] transition-colors"
                >
                  <span class="truncate">Enviar Partido</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <script>
        // IMPORTANTE: Reemplaza estas credenciales con las de tu proyecto de Supabase
        const SUPABASE_URL = 'https://renhtzglxihiqqvirlui.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlbmh0emdseGloaXFxdmlybHVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYxOTMzMTMsImV4cCI6MjA2MTc2OTMxM30.TIXnK8QjBpml3l9tqeP2f7p6NJVseHQ8ziEVo7RT0Hs'
        
        // Inicializar cliente de Supabase
        let supabase = null;
        
        try {
          if (SUPABASE_URL === 'TU_SUPABASE_URL_AQUI' || SUPABASE_ANON_KEY === 'TU_SUPABASE_ANON_KEY_AQUI') {
            throw new Error('Por favor configura las credenciales de Supabase');
          }
          supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
          document.getElementById('config-message').style.display = 'none';
        } catch (error) {
          console.error('Error de configuración:', error);
          showError('Error de configuración: ' + error.message);
        }

        // Función para mostrar errores
        function showError(message) {
          document.getElementById('loading').style.display = 'none';
          document.getElementById('error-message').classList.remove('hidden');
          document.getElementById('error-text').textContent = message;
        }

        // Función para validar input de sets
        function validarInputSet(input) {
          const valor = parseInt(input.value);
          if (valor < 0) {
            input.value = 0;
          } else if (valor > 99) {
            input.value = 99;
          }
        }
      </script>
  </body>
</html>
